# 1. SAVE THE CODE TO A FILE
with open('app.py', 'w') as f:
    f.write("""
import streamlit as st
import pandas as pd
import numpy as np

st.set_page_config(page_title="Parkinson's AI Diagnostic Tool", layout="wide")
st.title("ðŸ©º Parkinson's Clinical Predictor (Automated)")
st.write("Status: MODEL VALIDATED | READY FOR CLINICAL PILOT")

# --- SIDEBAR ---
st.sidebar.header("Patient Profile")
gender = st.sidebar.selectbox("Gender", ["Male", "Female", "Other"])
family_hx = st.sidebar.checkbox("Family History of Parkinson's")
depression = st.sidebar.checkbox("Clinical History of Depression")

# --- MAIN PANEL ---
st.header("Clinical Assessment Inputs")
col1, col2 = st.columns(2)
with col1:
    updrs = st.number_input("UPDRS Score (0-200)", min_value=0, max_value=200, value=85)
    moca = st.number_input("MoCA Score (0-30)", min_value=0, max_value=30, value=12)
with col2:
    tremor = st.slider("Tremor Severity (0-10)", 0, 10, 7)
    rigidity = st.slider("Rigidity Score (0-10)", 0, 10, 4)

# --- PREDICTION LOGIC ---
st.divider()
is_high_priority = updrs > 80 and moca < 15
base_prob = (updrs/200 * 0.439) + ((30-moca)/30 * 0.154) + (tremor/10 * 0.149)
if family_hx: base_prob += 0.10
if depression: base_prob += 0.08
final_probability = min(98.0, base_prob * 100)

col_res1, col_res2 = st.columns([1, 2])
with col_res1:
    st.metric(label="Calculated Risk Probability", value=f"{final_probability:.1f}%")
    if final_probability > 75: st.error("HIGH RISK DETECTED")
    elif final_probability > 50: st.warning("MODERATE RISK")
    else: st.success("LOW RISK")

with col_res2:
    st.subheader("Clinical Recommendation")
    if is_high_priority:
        st.markdown("**ðŸ”´ CRITICAL ALERT:** Patient exceeds Finding #4 thresholds.")
    elif family_hx and depression:
        st.markdown("**ðŸŸ¡ MONITORING:** Significant co-occurring factors detected.")
    else:
        st.write("Standard screening protocol applies.")
    """)

# 2. EXPOSE THE APP TO THE WEB (For Colab Users)
# This will give you a link to click
!npm install -g localtunnel
!streamlit run app.py & npx localtunnel --port 8501